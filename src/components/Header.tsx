import { useState } from 'react'
import { Link } from 'react-router-dom'
import {
  Search,
  Bell,
  User,
  LayoutGrid,
  Users,
  GitBranch,
  FileText,
  Eye,
} from 'lucide-react'

interface HeaderProps {
  currentView: string
  onNavigate: (
    view: 'briefing' | 'leads' | 'customer360' | 'quotes' | 'pipeline'
  ) => void
}

const Header = ({ currentView, onNavigate }: HeaderProps) => {
  const [isSearchOpen, setIsSearchOpen] = useState(false)

  const menuItems = [
    { id: 'briefing', label: 'Agentic Hub', icon: LayoutGrid, path: '/' },
    { id: 'leads', label: 'Leads', icon: Users, path: '/leads' },
    { id: 'pipeline', label: 'Pipeline', icon: GitBranch, path: '/pipeline' },
    { id: 'quotes', label: 'Quotes', icon: FileText, path: '/quotes' },
    {
      id: 'customer360',
      label: 'Customer 360',
      icon: Eye,
      path: '/customer360',
    },
  ]

  const handleMenuClick = (id: string) => {
    if (
      id === 'briefing' ||
      id === 'leads' ||
      id === 'customer360' ||
      id === 'quotes' ||
      id === 'pipeline'
    ) {
      onNavigate(
        id as 'briefing' | 'leads' | 'customer360' | 'quotes' | 'pipeline'
      )
    }
  }

  return (
    <>
      <header className='bg-slate-900/50 backdrop-blur-sm border-b border-slate-700/50'>
        <div className='max-w-[1600px] mx-auto px-8 py-4 flex items-center justify-between'>
          <div className='flex items-center'>
            <Link to='/' className='flex items-center' aria-label='Home'>
              <svg
                xmlns='http://www.w3.org/2000/svg'
                viewBox='0 0 457 188'
                fill='none'
                className='h-10 w-auto'
              >
                <path
                  d='M306.267 36.4C306.827 37.8933 307.153 39.5733 307.247 41.44C307.34 43.3067 307.293 45.08 307.107 46.76C307.013 48.44 306.64 50.3533 305.987 52.5C305.427 54.6467 304.913 56.5133 304.447 58.1C303.98 59.5933 303.28 61.46 302.347 63.7C301.413 65.94 300.667 67.6667 300.107 68.88C299.64 70 298.94 71.54 298.007 73.5C295.3 79.4733 291.893 86.0533 287.787 93.24C283.773 100.427 279.993 106.54 276.447 111.58C267.767 123.993 259.46 133.98 251.527 141.54C243.687 149.193 235.287 154.56 226.327 157.64C222.22 159.133 218.02 159.367 213.727 158.34C209.527 157.313 206.167 154.933 203.647 151.2C201.873 148.68 200.427 145.46 199.307 141.54C198.28 137.62 197.627 134.4 197.347 131.88C197.16 129.36 196.88 125.767 196.507 121.1C195.2 101.127 198 80.8733 204.907 60.34C202.76 64.0733 200.893 67.62 199.307 70.98C197.813 74.2467 196.553 77.7 195.527 81.34C194.593 84.98 193.94 88.2 193.567 91C193.287 93.7067 192.96 97.3 192.587 101.78C192.493 103.087 191.7 103.833 190.207 104.02C188.713 104.207 187.827 103.647 187.547 102.34C187.173 100.847 186.987 99.26 186.987 97.58C186.987 95.9 187.173 94.22 187.547 92.54C187.827 90.86 188.153 89.32 188.527 87.92C188.993 86.4267 189.6 84.7933 190.347 83.02C191.093 81.2467 191.747 79.7533 192.307 78.54C192.96 77.3267 193.707 75.8333 194.547 74.06C195.293 72.66 196.32 70.6067 197.627 67.9C199.027 65.1933 200.193 62.9533 201.127 61.18C202.06 59.4067 203.133 57.4 204.347 55.16C205.56 52.8267 206.773 50.68 207.987 48.72C209.2 46.6667 210.46 44.66 211.767 42.7C212.233 42.14 212.84 42 213.587 42.28C215.173 41.8133 216.807 42.28 218.487 43.68C220.26 45.08 220.68 46.5733 219.747 48.16C207.8 69.8133 201.967 92.7733 202.247 117.04C202.34 121.24 202.433 124.553 202.527 126.98C202.62 129.313 202.947 132.253 203.507 135.8C204.067 139.44 204.86 142.613 205.887 145.32C207.007 148.213 208.453 150.5 210.227 152.18C212 153.86 213.867 154.933 215.827 155.4C217.88 155.96 220.073 156.053 222.407 155.68C224.74 155.307 226.98 154.607 229.127 153.58C231.273 152.553 233.42 151.2 235.567 149.52C242.94 143.827 249.707 137.06 255.867 129.22C262.12 121.287 268.933 111.72 276.307 100.52C282.933 90.44 288.253 81.06 292.267 72.38C294.32 67.9933 295.813 64.7733 296.747 62.72C297.68 60.5733 298.753 57.5867 299.967 53.76C301.18 49.9333 301.973 46.48 302.347 43.4C302.72 39.76 302.347 36.4933 301.227 33.6C300.2 30.7067 298.567 28.42 296.327 26.74C294.18 25.06 291.8 23.7533 289.187 22.82C286.667 21.7933 283.913 21.14 280.927 20.86C278.033 20.7667 275.7 20.7667 273.927 20.86C272.153 20.86 269.82 21.2333 266.927 21.98C264.127 22.6333 261.84 23.24 260.067 23.8C258.387 24.36 256.147 25.1067 253.347 26.04C250.547 26.9733 248.307 27.6733 246.627 28.14C246.253 28.2333 245.88 28.14 245.507 27.86C245.227 27.58 245.087 27.2533 245.087 26.88C245.087 26.5067 245.273 26.2267 245.647 26.04C248.447 24.92 250.967 23.94 253.207 23.1C255.54 22.1667 258.153 21.3267 261.047 20.58C263.94 19.74 266.647 19.18 269.167 18.9C271.687 18.5267 274.347 18.3867 277.147 18.48C280.04 18.48 282.793 18.8067 285.407 19.46C287.18 19.8333 288.627 20.2067 289.747 20.58C290.867 20.86 292.173 21.3267 293.667 21.98C295.253 22.54 296.56 23.24 297.587 24.08C298.613 24.8267 299.687 25.76 300.807 26.88C301.927 28 302.907 29.3533 303.747 30.94C304.68 32.5267 305.52 34.3467 306.267 36.4ZM329.402 110.74C329.682 110.367 330.008 110.32 330.382 110.6C330.848 110.88 330.942 111.207 330.662 111.58C329.822 113.167 327.628 115.733 324.082 119.28C321.655 121.613 319.135 123.713 316.522 125.58C313.908 127.54 311.108 129.36 308.122 131.04C305.228 132.72 302.568 133.233 300.142 132.58C297.715 131.833 296.175 130.247 295.522 127.82C294.868 125.3 294.822 122.593 295.382 119.7C296.502 113.913 298.415 109.387 301.122 106.12C302.148 104.44 303.595 102.993 305.462 101.78C307.048 100.847 308.542 100.38 309.942 100.38C311.435 100.287 312.695 100.94 313.722 102.34C314.375 103.367 314.515 104.813 314.142 106.68C313.862 108.453 313.348 109.62 312.602 110.18C311.948 110.74 310.548 110.833 308.402 110.46C306.348 110.087 304.902 109.993 304.062 110.18C302.288 113.167 301.028 116.013 300.282 118.72C298.228 126.373 299.208 130.153 303.222 130.06C304.995 130.06 307.655 128.987 311.202 126.84C313.535 125.44 315.822 123.807 318.062 121.94C320.208 120.26 322.168 118.487 323.942 116.62C324.502 116.153 325.342 115.22 326.462 113.82C327.675 112.42 328.655 111.393 329.402 110.74ZM309.942 104.3C309.382 103.647 308.215 104.347 306.442 106.4C306.348 106.587 306.162 106.867 305.882 107.24C305.695 107.52 305.555 107.8 305.462 108.08C305.648 108.08 306.348 108.127 307.562 108.22C308.775 108.22 309.475 108.173 309.662 108.08C310.315 106.213 310.408 104.953 309.942 104.3ZM362.736 115.5C363.016 115.127 363.389 114.613 363.856 113.96C364.416 113.307 364.883 112.7 365.256 112.14C365.723 111.58 366.143 111.113 366.516 110.74C366.889 110.273 367.076 109.993 367.076 109.9C367.823 109.06 368.476 108.967 369.036 109.62C369.316 110.18 369.176 110.787 368.616 111.44C367.589 112.467 366.843 113.26 366.376 113.82C364.416 116.433 362.223 119.093 359.796 121.8C355.223 126.653 350.696 128.987 346.216 128.8C343.696 128.613 341.876 127.54 340.756 125.58C339.729 123.62 339.449 121.38 339.916 118.86C340.103 117.647 340.429 116.387 340.896 115.08C339.309 117.04 337.909 118.767 336.696 120.26C333.709 123.9 331.376 126.793 329.696 128.94C327.456 131.927 325.449 133.513 323.676 133.7C319.103 133.98 319.056 129.407 323.536 119.98C326.149 114.38 329.556 109.153 333.756 104.3C335.156 102.62 336.789 101.5 338.656 100.94C340.336 100.38 341.876 100.52 343.276 101.36C345.143 102.667 345.423 104.207 344.116 105.98C344.023 106.073 343.836 106.073 343.556 105.98C343.276 105.887 342.949 105.747 342.576 105.56C342.296 105.28 341.736 105.327 340.896 105.7C340.149 105.98 339.263 106.633 338.236 107.66C334.596 111.673 331.563 115.733 329.136 119.84C327.549 122.36 326.243 124.787 325.216 127.12C324.283 129.173 323.863 130.247 323.956 130.34C324.236 130.713 325.216 130.153 326.896 128.66C329.976 125.86 333.943 121.38 338.796 115.22C340.103 113.54 341.503 111.627 342.996 109.48C344.396 106.773 346.029 104.207 347.896 101.78C348.736 100.66 349.856 100.52 351.256 101.36C352.189 102.013 352.283 102.807 351.536 103.74C347.989 108.313 345.516 112.793 344.116 117.18C343.276 119.793 343.043 121.847 343.416 123.34C343.696 124.647 344.396 125.58 345.516 126.14C346.636 126.607 347.849 126.747 349.156 126.56C352.516 126.093 357.043 122.407 362.736 115.5ZM425.674 112.98C426.14 112.047 426.654 111.953 427.214 112.7C427.68 113.447 427.634 113.913 427.074 114.1C426.327 114.473 425.767 114.847 425.394 115.22C421.474 118.767 418.067 121.147 415.174 122.36C411.067 124.133 407.94 124.273 405.794 122.78C404.487 125.207 403.134 127.4 401.734 129.36C398.84 133.373 396.32 135.893 394.174 136.92C392.96 137.667 391.654 137.9 390.254 137.62C388.947 137.34 387.92 136.593 387.174 135.38C385.867 133.233 385.447 129.453 385.914 124.04C386.287 120.027 387.22 115.593 388.714 110.74C388.714 110.553 388.76 110.367 388.854 110.18C388.947 109.9 388.994 109.667 388.994 109.48C389.087 109.293 389.18 109.107 389.274 108.92C388.154 110.693 386.52 113.26 384.374 116.62C382.32 119.98 380.827 122.407 379.894 123.9C379.427 124.553 378.774 125.58 377.934 126.98C377.094 128.38 376.3 129.64 375.554 130.76C374.9 131.88 374.2 132.86 373.454 133.7C371.494 136.22 369.347 137.293 367.014 136.92C365.987 136.733 365.1 136.313 364.354 135.66C363.7 135.1 363.234 134.26 362.954 133.14C362.674 132.113 362.487 131.227 362.394 130.48C362.207 129.64 362.207 128.473 362.394 126.98C362.487 125.487 362.58 124.507 362.674 124.04C362.674 123.48 362.767 122.547 362.954 121.24C363.98 113.493 366.267 106.773 369.814 101.08C370.56 99.96 371.54 99.7267 372.754 100.38C373.967 100.94 374.247 101.827 373.594 103.04C370.514 109.107 368.414 114.66 367.294 119.7C367.107 120.54 366.967 121.287 366.874 121.94C366.78 122.5 366.594 123.527 366.314 125.02C366.127 126.513 366.034 127.773 366.034 128.8C366.034 129.827 366.08 130.9 366.174 132.02C366.267 133.047 366.594 133.793 367.154 134.26C367.714 134.727 368.46 134.82 369.394 134.54C369.954 134.353 370.514 134.073 371.074 133.7C371.634 133.327 372.147 132.86 372.614 132.3C373.174 131.647 373.594 131.04 373.874 130.48C374.247 129.92 374.667 129.313 375.134 128.66C375.6 127.913 375.974 127.353 376.254 126.98C377.467 125.393 379.24 122.78 381.574 119.14C386.054 112.233 389.274 106.633 391.234 102.34C391.42 101.967 391.7 101.733 392.074 101.64C392.54 100.8 393.1 100.193 393.754 99.82C394.034 99.6333 394.407 99.5867 394.874 99.68C395.434 99.7733 395.854 99.96 396.134 100.24C396.507 100.52 396.74 100.847 396.834 101.22C396.927 101.593 396.787 101.967 396.414 102.34C396.32 102.433 396.274 102.527 396.274 102.62C396.367 102.62 396.274 102.9 395.994 103.46C395.994 103.553 395.947 103.693 395.854 103.88C395.854 104.067 395.807 104.207 395.714 104.3C395.62 104.58 395.434 105.047 395.154 105.7C394.967 106.26 394.874 106.633 394.874 106.82C394.5 107.94 393.94 109.62 393.194 111.86C392.074 115.033 391.187 118.113 390.534 121.1C389.694 124.833 389.32 128.24 389.414 131.32C389.414 133.373 389.787 134.68 390.534 135.24C391.654 136.08 393.38 135.38 395.714 133.14C398.794 130.06 401.687 126.047 404.394 121.1C403.18 119.14 403.32 115.827 404.814 111.16C406.214 106.587 408.594 102.48 411.954 98.84C412.327 98.3733 412.887 98.1867 413.634 98.28C413.82 98.28 414.007 98.3267 414.194 98.42C414.194 98.5133 414.24 98.56 414.334 98.56C415.64 99.2133 415.92 100.053 415.174 101.08C415.08 101.08 414.987 101.173 414.894 101.36C414.8 101.453 414.754 101.5 414.754 101.5C414.007 103.833 413.354 105.747 412.794 107.24C411.394 110.973 409.807 114.707 408.034 118.44C407.66 119.187 407.24 119.98 406.774 120.82C407.334 121.753 408.267 122.22 409.574 122.22C410.974 122.22 412.234 122.033 413.354 121.66C414.567 121.193 415.734 120.68 416.854 120.12C419.28 118.907 421.8 117.087 424.414 114.66C424.974 114.193 425.394 113.633 425.674 112.98ZM409.014 110.18C407.8 112.793 407.054 114.847 406.774 116.34C407.24 115.407 407.847 114.1 408.594 112.42C409.34 110.74 409.807 109.713 409.994 109.34C409.994 109.247 410.087 108.967 410.274 108.5C410.554 108.033 410.834 107.473 411.114 106.82C411.487 106.167 411.767 105.56 411.954 105C410.74 106.773 409.76 108.5 409.014 110.18ZM395.854 102.9C395.854 102.9 395.807 102.9 395.714 102.9H395.854ZM454.636 110.74C454.916 110.367 455.243 110.32 455.616 110.6C456.083 110.88 456.176 111.207 455.896 111.58C455.056 113.167 452.863 115.733 449.316 119.28C446.889 121.613 444.369 123.713 441.756 125.58C439.143 127.54 436.343 129.36 433.356 131.04C430.463 132.72 427.803 133.233 425.376 132.58C422.949 131.833 421.409 130.247 420.756 127.82C420.103 125.3 420.056 122.593 420.616 119.7C421.736 113.913 423.649 109.387 426.356 106.12C427.383 104.44 428.829 102.993 430.696 101.78C432.283 100.847 433.776 100.38 435.176 100.38C436.669 100.287 437.929 100.94 438.956 102.34C439.609 103.367 439.749 104.813 439.376 106.68C439.096 108.453 438.583 109.62 437.836 110.18C437.183 110.74 435.783 110.833 433.636 110.46C431.583 110.087 430.136 109.993 429.296 110.18C427.523 113.167 426.263 116.013 425.516 118.72C423.463 126.373 424.443 130.153 428.456 130.06C430.229 130.06 432.889 128.987 436.436 126.84C438.769 125.44 441.056 123.807 443.296 121.94C445.443 120.26 447.403 118.487 449.176 116.62C449.736 116.153 450.576 115.22 451.696 113.82C452.909 112.42 453.889 111.393 454.636 110.74ZM435.176 104.3C434.616 103.647 433.449 104.347 431.676 106.4C431.583 106.587 431.396 106.867 431.116 107.24C430.929 107.52 430.789 107.8 430.696 108.08C430.883 108.08 431.583 108.127 432.796 108.22C434.009 108.22 434.709 108.173 434.896 108.08C435.549 106.213 435.643 104.953 435.176 104.3Z'
                  fill='#7D8399'
                ></path>
                <path
                  d='M0 47.1757V70.7636L60.5275 35.1592L121.945 70.7636V47.1757L60.5275 12.4614L0 47.1757Z'
                  fill='#7D8399'
                ></path>
                <path
                  d='M80.5549 0L60.5275 12.4615L121.5 47.6209L122.39 118.385L141.973 106.813V35.1594L80.5549 0Z'
                  fill='#A6A8B5'
                ></path>
                <path
                  d='M0 140.638V70.7641L60.5275 35.1597L79.6648 45.841L20.0275 82.3355V152.209L0 140.638Z'
                  fill='#555D7C'
                ></path>
                <path
                  d='M20.0275 81.89V152.209L81.445 187.813L100.582 175.797L40.0549 141.082V69.8735L20.0275 81.89Z'
                  fill='#2C3860'
                ></path>
                <path
                  d='M101.472 152.654L39.6099 117.94V141.527L100.582 175.797L162 140.637V117.94L101.472 152.654Z'
                  fill='#555D7C'
                ></path>
                <path
                  d='M141.973 106.368L81.4451 141.528L101.473 152.654L162 118.385V47.1762L141.973 35.1597V106.368Z'
                  fill='#7D8399'
                ></path>
              </svg>
            </Link>
          </div>

          <nav className='flex items-center gap-1 mx-12'>
            {menuItems.map(item => {
              const Icon = item.icon
              const isActive = currentView === item.path
              const isClickable =
                item.id === 'briefing' ||
                item.id === 'leads' ||
                item.id === 'customer360' ||
                item.id === 'quotes' ||
                item.id === 'pipeline'

              return (
                <button
                  key={item.id}
                  onClick={() => handleMenuClick(item.id)}
                  disabled={!isClickable}
                  className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all ${
                    isActive
                      ? 'bg-slate-800 text-white border border-slate-700'
                      : isClickable
                      ? 'text-slate-300 hover:bg-slate-800/50 hover:text-white'
                      : 'text-slate-500 cursor-not-allowed'
                  }`}
                >
                  <Icon className='w-4 h-4' />
                  <span>{item.label}</span>
                </button>
              )
            })}
          </nav>

          <div className='flex items-center gap-3'>
            <button
              onClick={() => setIsSearchOpen(true)}
              className='px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors flex items-center gap-2 shadow-md'
            >
              <Search className='w-4 h-4 text-white' />
              <span className='text-sm font-medium text-white'>
                Ask me anything!
              </span>
            </button>
            <button className='p-2 hover:bg-slate-800 rounded-lg border border-slate-700 transition-colors relative'>
              <Bell className='w-4 h-4 text-slate-300' />
              <span className='absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full'></span>
            </button>
            <button className='p-2 hover:bg-slate-800 rounded-lg border border-slate-700 transition-colors'>
              <User className='w-4 h-4 text-slate-300' />
            </button>
          </div>
        </div>
      </header>

      {isSearchOpen && (
        <div
          className='fixed inset-0 bg-slate-900/80 backdrop-blur-md z-50 flex items-start justify-center pt-32'
          onClick={() => setIsSearchOpen(false)}
        >
          <div
            className='w-full max-w-2xl mx-4'
            onClick={e => e.stopPropagation()}
          >
            <div className='relative'>
              <Search className='absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400' />
              <input
                type='text'
                placeholder='Ask anything...'
                autoFocus
                className='w-full pl-12 pr-4 py-4 bg-white/95 backdrop-blur-sm border border-slate-300 rounded-2xl text-base text-slate-900 placeholder-slate-400 focus:outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20 shadow-2xl'
                onKeyDown={e => {
                  if (e.key === 'Escape') {
                    setIsSearchOpen(false)
                  }
                }}
              />
            </div>
            <p className='text-center text-sm text-slate-400 mt-4'>
              Press{' '}
              <kbd className='px-2 py-1 bg-slate-800 rounded text-xs'>ESC</kbd>{' '}
              to close
            </p>
          </div>
        </div>
      )}
    </>
  )
}

export default Header
